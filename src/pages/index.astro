---
import { getCollection } from "astro:content";
import { format } from "date-fns";

import ScrapeObfuscatedLink from "~/components/ScrapeObfuscatedLink.svelte";
import PageLayout from "~/layouts/PageLayout.astro";

const posts = await getCollection("posts");
posts.sort((a, b) => a.data.published.getTime() - b.data.published.getTime());
posts.reverse();
---

<PageLayout title="Max Niederman">
	<header class="type">
		<h1>Max Niederman</h1>
	</header>

	<main class="type">
		<p>
			Hello! I'm Max. This is my personal website, where I write about things I
			find interesting and share projects I'm working on.
		</p>

		<p>
			I am currently Chief Scientific Officer at <a href="https://bindwell.ai">Bindwell</a> (YC <span class="lining-nums">W25</span>),
			on a leave of absence from a math degree at <a href="https://reed.edu">Reed College</a>.
			I enjoy contributing to open source projects in my free time, such as
			<a href="https://rust-lang.org">the Rust language</a>
			and <a href="https://github.com/max-niederman/ttyper" data-link-type="github">ttyper</a>, a TUI
			typing test I created. I was also programming lead of
			<a href="https://3636.team"> FRC team 3636 </a>
			for two years.
		</p>

		<ul class="links-row">
			<li>
				<a href="https://github.com/max-niederman" data-link-type="github">GitHub</a>
			</li>
			<li>
				<a href="https://www.linkedin.com/in/max-niederman/" data-link-type="linkedin">LinkedIn</a>
			</li>
			<li>
				<ScrapeObfuscatedLink
					hrefBase64={btoa("mailto:max@maxniederman.com")}
					linkType="email"
					client:load
				>
					Email</ScrapeObfuscatedLink
				>
			</li>
			<li>
				<a href="https://discord.com/users/311324287086624768" data-link-type="discord">Discord</a>
			</li>
		</ul>

		<h2 id="writing">Writing</h2>

		<ul class="post-links">
			{
				posts.map((post) => (
					<li>
						<a href={post.slug} data-link-type="internal">{post.data.title}</a> â€”{" "}
						{format(post.data.published, "PPP")}
					</li>
				))
			}
		</ul>
	</main>
</BaseLayout>

<style lang="scss">
	@use "~/styles/links.scss";
	@use "~/styles/type.scss";

	h1 {
		font-size: 2.5rem;
		font-style: italic;
		font-weight: 450;
		font-feature-settings: "swsh", "calt";
	}

	.links-row,
	.post-links {
		list-style: none;
		padding: 0;
	}

	.links-row {
		display: flex;
		flex-wrap: wrap;
		gap: 1ch;
	}
</style>
